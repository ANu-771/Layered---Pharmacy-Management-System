<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.AreaChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="720.0" prefWidth="1040.0" stylesheets="@../view/table.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="lk.ijse.pharmacy.controller.DashboardController">

    <center>
        <VBox spacing="20.0" style="-fx-background-color: white;">
            <padding>
                <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
            </padding>

            <Label text="Dashboard Overview" textFill="#1e293b">
                <font>
                    <Font name="System Bold" size="26.0" />
                </font>
            </Label>

            <HBox spacing="20.0">
                <VBox alignment="CENTER" prefHeight="130.0" prefWidth="220.0" style="-fx-background-color: #e0f2fe; -fx-background-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 5);">
                    <Label text="Total Medicines" textFill="#0369a1">
                        <font><Font size="16.0" /></font>
                    </Label>
                    <Label fx:id="lblTotalMedicines" text="1,240">
                        <font><Font name="System Bold" size="32.0" /></font>
                    </Label>
                    <Label text="+5 New Items" textFill="#0284c7">
                        <font><Font size="12.0" /></font>
                    </Label>
                </VBox>

                <VBox alignment="CENTER" prefHeight="130.0" prefWidth="220.0" style="-fx-background-color: #dcfce7; -fx-background-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 5);">
                    <Label text="Active Customers" textFill="#15803d">
                        <font><Font size="16.0" /></font>
                    </Label>
                    <Label fx:id="lblActiveCustomers" text="85">
                        <font><Font name="System Bold" size="32.0" /></font>
                    </Label>
                    <Label text="+2 Today" textFill="#16a34a">
                        <font><Font size="12.0" /></font>
                    </Label>
                </VBox>

                <VBox alignment="CENTER" prefHeight="130.0" prefWidth="220.0" style="-fx-background-color: #fef3c7; -fx-background-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 5);">
                    <Label text="Today's Income" textFill="#b45309">
                        <font><Font size="16.0" /></font>
                    </Label>
                    <Label fx:id="lblTodayIncome" text="Rs. 45k">
                        <font><Font name="System Bold" size="32.0" /></font>
                    </Label>
                    <Label text="Target: 50k" textFill="#d97706">
                        <font><Font size="12.0" /></font>
                    </Label>
                </VBox>
            </HBox>

            <Separator />

            <HBox spacing="20.0" VBox.vgrow="ALWAYS">
                <children>
                    <VBox style="-fx-background-color: #f8fafc; -fx-background-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 0);" HBox.hgrow="ALWAYS">
                        <padding><Insets bottom="10.0" left="10.0" right="10.0" top="10.0" /></padding>
                        <children>
                            <Label text="Sales Analytics (Monthly)" textFill="#475569">
                                <font><Font name="System Bold" size="16.0" /></font>
                                <VBox.margin><Insets bottom="10.0" left="10.0" top="5.0" /></VBox.margin>
                            </Label>

                            <AreaChart fx:id="chartSales" title="Income Trends" VBox.vgrow="ALWAYS">
                                <xAxis>
                                    <CategoryAxis label="Date" side="BOTTOM" />
                                </xAxis>
                                <yAxis>
                                    <NumberAxis label="Revenue (Rs)" side="LEFT" />
                                </yAxis>
                            </AreaChart>
                        </children>
                    </VBox>

                    <VBox prefWidth="400.0" style="-fx-background-color: #fff1f2; -fx-background-radius: 15; -fx-border-color: #fda4af; -fx-border-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 0);" HBox.hgrow="SOMETIMES">
                        <padding><Insets bottom="15.0" left="15.0" right="15.0" top="15.0" /></padding>
                        <children>
                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                <children>
                                    <Label text="âš  Critical: Expiring Soon" textFill="#be123c">
                                        <font><Font name="System Bold" size="15.0" /></font>
                                    </Label>
                                </children>
                                <VBox.margin>
                                    <Insets bottom="10.0" />
                                </VBox.margin>
                            </HBox>

                            <TableView fx:id="tblExpiring" style="-fx-background-radius: 8; -fx-border-radius: 8;" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colExpId" prefWidth="75.0" text="Med ID" />
                                    <TableColumn fx:id="colExpName" prefWidth="130.0" text="Medicine Name" />
                                    <TableColumn fx:id="colExpDate" prefWidth="90.0" text="Exp Date" />
                                    <TableColumn fx:id="colExpQty" prefWidth="60.0" text="Qty" />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </children>
                    </VBox>
                </children>
            </HBox>

        </VBox>
    </center>

</BorderPane>
